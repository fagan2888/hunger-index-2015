function getColor(e){return"-"===e?"#808080":"<5"===e?"#4caf45":e>=50?"#ab0635":e>=35?"#e9841d":e>=20?"#fbe0c7":e>=10?"#bedcb3":e>=0?"#4caf45":"#eaeaea"}function getSeverity(e){return"-"===e?"No data":"<5"===e?"Low":e>=50?"Extremely alarming":e>=35?"Alarming":e>=20?"Serious":e>=10?"Moderate":e>=0?"Low":"Not calculated"}$(document).foundation(),function(e,o,t,r){"use strict";function a(e){return{fillColor:getColor(e.properties.score),weight:e.properties.score?1:0,opacity:.3,color:"white",dashArray:"",fillOpacity:e.properties.score?.7:0}}function i(e){var o=e.target;o.setStyle({weight:5,color:"white",dashArray:"",fillOpacity:.7}),t.Browser.ie||t.Browser.opera||o.bringToFront()}function n(e){p.resetStyle(e.target)}function c(e,o){var t="<h3>"+e.properties.name+"</h3> <p>Score: <strong>"+e.properties.score+"</strong></p> <p>Level: <strong>"+getSeverity(e.properties.score)+'</strong></p> <p><a href="/countries/'+e.id+'">Come visit!</p>';o.bindPopup(t,{autopan:!0}),o.on({mouseover:i,mouseout:n})}t.Icon.Default.imagePath="images/";var s=t.map("map",{center:[52.5377,13.3958],zoom:4});new t.tileLayer("http://a{s}.acetate.geoiq.com/tiles/acetate-base/{z}/{x}/{y}.png",{subdomains:"0123",minZoom:0,maxZoom:18}).addTo(s);var p;t.control();p=new t.GeoJSON.AJAX("data/mockdata.geo.json",{style:a,onEachFeature:c}),p.addTo(s)}(window,document,L);